<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø¬Ù„ÙŠØ³Ø© Ø§Ù„Ø£Ø·ÙØ§Ù„</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="/style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Montserrat', sans-serif;
}

body {
    background: linear-gradient(to right, #fff0f3, #f4e4f0, #e6f7f6);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

header {
    background: linear-gradient(135deg, #fcdcec, #ffb6c1);
    padding: 15px 0;
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

nav {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
}

.logo {
    font-size: 24px;
    font-weight: 600;
    color: #000;
    display: flex;
    align-items: center;
    gap: 5px;
}

.logo img {
    width: 35px;
    height: 35px;
}

.language-selector select {
    padding: 8px;
    border-radius: 5px;
    border: none;
    font-size: 1rem;
    cursor: pointer;
    background-color: #fff;
    color: #555;
}

.user-name-display {
    display: none;
    font-size: 1rem;
    font-weight: bold;
    color: #2c3e50;
    margin-left: 10px;
    padding: 5px 10px;
    background-color: #ecf0f1;
    border-radius: 15px;
}

.user-name-display i {
    margin-right: 5px;
    color: #3498db;
}

.menu-toggle ul li .user-name-display {
    display: inline-flex;
    align-items: center;
}

nav ul {
    list-style: none;
    display: flex;
    gap: 20px;
}

nav ul li a {
    color: #4a4a4a;
    text-decoration: none;
    font-size: 15px;
    font-weight: 500;
    transition: color 0.3s ease;
}

nav ul li a:hover {
    color: #ff6b81;
}

nav .menu-toggle label {
    display: none;
    font-size: 24px;
    cursor: pointer;
    color: #000;
}

nav .menu-toggle input[type="checkbox"] {
    display: none;
}

nav .menu-toggle input[type="checkbox"]:checked ~ ul {
    display: block;
}

.profile-section {
    padding: 100px 20px 40px;
    flex: 1;
}

.profile-container {
    max-width: 800px;
    margin: 0 auto;
    background: linear-gradient(135deg, #fff, #ffccd5);
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
    text-align: center;
}

.profile-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.profile-container img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid #ffccd5;
    transition: transform 0.3s ease;
}

.profile-container img:hover {
    transform: scale(1.1);
}

.profile-container h2 {
    font-size: 28px;
    color: #2c3e50;
    margin: 0;
}

.status-badge {
    display: inline-block;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 16px;
    font-weight: 600;
}

.status-badge.busy-today {
    background: #ff6b81;
    color: #fff;
}

.status-badge.available-today {
    background: #98ded9;
    color: #2c3e50;
}

.profile-info {
    margin-top: 20px;
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    text-align: right;
}

.profile-info p {
    font-size: 16px;
    color: #555;
    display: flex;
    align-items: center;
    gap: 8px;
}

.profile-info i {
    color: #ff8a9b;
}

.booked-dates {
    margin-top: 20px;
    text-align: right;
}

.booked-dates h4 {
    font-size: 18px;
    color: #2c3e50;
    margin-bottom: 10px;
}

.booked-dates ul {
    list-style: none;
    padding: 0;
}

.booked-dates li {
    background: #f9f9f9;
    padding: 8px 12px;
    border-radius: 8px;
    margin-bottom: 8px;
    font-size: 14px;
    color: #555;
}

.contact-btn {
    display: inline-block;
    margin-top: 20px;
    background: linear-gradient(135deg, #ffccd5, #ff8a9b);
    color: #2c3e50;
    padding: 12px 24px;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
}

.contact-btn:hover {
    background: linear-gradient(135deg, #ff8a9b, #98ded9);
    transform: translateY(-2px);
}

.login-prompt {
    color: #ff6b81;
    font-size: 16px;
    margin-top: 20px;
}

.footer {
    background: linear-gradient(135deg, #fcdcec, #ffccd5);
    color: #000;
    padding: 40px 20px;
}

.footer .container {
    max-width: 1200px;
    margin: 0 auto;
}

.footer .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.footer h3 {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 15px;
}

.footer p, .footer ul li {
    font-size: 14px;
    line-height: 1.6;
}

.footer ul {
    list-style: none;
    padding: 0;
}

.footer ul li a {
    color: #000;
    text-decoration: none;
    transition: color 0.3s ease;
}

.footer ul li a:hover {
    color: #98ded9;
}

.Social-Media {
    display: flex;
    justify-content: center;
    gap: 15px;
}

.Social-Media a {
    display: flex;
    background: #e3edf7;
    height: 40px;
    width: 40px;
    border-radius: 8px;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    box-shadow: 3px 3px 5px -0.5px rgba(0, 0, 0, 0.15), -3px -3px 5px -0.5px rgba(255, 255, 255, 0.7);
    transition: transform 0.5s;
}

.Social-Media a i {
    font-size: 20px;
    color: #777;
    transition: transform 0.5s;
}

.Social-Media a:hover {
    box-shadow: inset 4px 4px 6px -1px rgba(0, 0, 0, 0.2), inset -4px -4px 6px -1px rgba(255, 255, 255, 0.7), -0.5px -0.5px 0px rgba(255, 255, 255, 1), 0.5px 0.5px 0px rgba(0, 0, 0, 0.15), 0px 12px 10px -10px rgba(0, 0, 0, 0.05);
    transform: translateY(2px);
}

.Social-Media a:hover i {
    transform: scale(0.90);
}

.Social-Media a:hover .fa-facebook { color: #3b5998; }
.Social-Media a:hover .fa-whatsapp { color: #4fce5d; }
.Social-Media a:hover .fa-twitter { color: #00acee; }
.Social-Media a:hover .fa-instagram { color: #f14843; }
.Social-Media a:hover .fa-linkedin { color: #3b5998; }
.Social-Media a:hover .fa-youtube { color: #f00; }

.footer .copyright {
    text-align: center;
    font-size: 14px;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
}

@media (max-width: 768px) {
    nav ul {
        display: none;
        position: absolute;
        top: 100%;
        right: 0;
        width: 200px;
        background: linear-gradient(135deg, #ffccd5, #e6f7f6);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    nav .menu-toggle label {
        display: block;
    }

    nav .menu-toggle input[type="checkbox"]:checked ~ ul {
        display: block;
    }

    nav ul li {
        margin: 10px 0;
    }

    nav ul li a {
        display: block;
        padding: 10px;
    }

    .profile-section {
        padding: 80px 15px 30px;
    }

    .profile-container {
        padding: 20px;
    }

    .profile-container img {
        width: 120px;
        height: 120px;
    }

    .profile-container h2 {
        font-size: 24px;
    }

    .status-badge {
        font-size: 14px;
        padding: 6px 12px;
    }

    .profile-info p {
        font-size: 14px;
    }

    .booked-dates h4 {
        font-size: 16px;
    }

    .booked-dates li {
        font-size: 12px;
    }

    .contact-btn {
        padding: 10px 20px;
        font-size: 14px;
    }

    .footer .grid {
        grid-template-columns: 1fr;
        text-align: center;
    }

    .Social-Media {
        justify-content: center;
    }
}

@media (max-width: 480px) {
    header {
        padding: 8px 0;
    }

    nav {
        padding: 0 10px;
    }

    .logo {
        font-size: 18px;
    }

    .logo img {
        width: 25px;
        height: 25px;
    }

    .language-selector select {
        padding: 6px;
        font-size: 0.8rem;
    }

    nav ul {
        width: 100%;
        padding: 10px;
    }

    nav ul li a {
        font-size: 14px;
    }

    .profile-container img {
        width: 100px;
        height: 100px;
    }

    .profile-container h2 {
        font-size: 20px;
    }

    .status-badge {
        font-size: 12px;
        padding: 5px 10px;
    }

    .profile-info p {
        font-size: 12px;
    }

    .booked-dates h4 {
        font-size: 14px;
    }

    .contact-btn {
        padding: 8px 16px;
        font-size: 12px;
    }

    .footer {
        padding: 20px 10px;
    }

    .footer h3 {
        font-size: 16px;
    }

    .footer p, .footer ul li {
        font-size: 12px;
    }

    .footer .copyright {
        font-size: 10px;
    }

    .Social-Media a {
        height: 30px;
        width: 30px;
    }

    .Social-Media a i {
        font-size: 14px;
    }
}
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="logo">
        <img src="/images-1-removebg-preview.png" alt="Safe Hands Icon">
        <span data-i18n="site_title">Ø§Ù„Ø£ÙŠØ¯ÙŠ Ø§Ù„Ø¢Ù…Ù†Ø©</span>
      </div>
      <div class="language-selector">
        <select id="languageSelect" onchange="changeLanguage()">
          <option value="ar">ğŸ‡ªğŸ‡¬ Ø¹Ø±Ø¨ÙŠ</option>
          <option value="en">ğŸ‡ºğŸ‡¸ English</option>
        </select>
      </div>
      <div class="menu-toggle">
        <input type="checkbox" id="menu-toggle">
        <label for="menu-toggle">â˜°</label>
        <ul>
          <li><a href="/index.html" class="nav-link" data-i18n="nav_home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
          <li><a href="/services/index.html" class="nav-link" data-i18n="nav_services">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
          <li><a href="/about/index.html" class="nav-link" data-i18n="nav_about">Ù…Ù† Ù†Ø­Ù†</a></li>
          <li><a href="/con/index.html" class="nav-link" data-i18n="nav_contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
          <li><a href="/baby/index.html" class="nav-link" data-i18n="nav_find_babysitters">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù„ÙŠØ³Ø§Øª Ø£Ø·ÙØ§Ù„</a></li>

          <li id="dashboard-link" style="display: none;">

          </li>
          <li id="logout-link" style="display: none;">
            <a href="#" class="nav-link" onclick="logout(); return false;" data-i18n="nav_logout">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
          </li>
          <li id="login-signup-link">
            <a href="/log/login.html" class="nav-link" data-i18n="nav_login_signup">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
          </li>
          <span id="user-name-display" class="user-name-display">
            <a style="text-decoration: none; color: #4a4a4a;" href="/my_pro/profile.html">
                            <i class="fas fa-user"></i>
                        <span id="user-name-text"></span>
                    </a>
          </span>
        </ul>
      </div>
    </nav>
  </header>

  <main class="profile-section">
    <div class="profile-container" id="profile"></div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="grid">
        <div>
          <h3 data-i18n="footer_company_title">Safe Hands</h3>
          <p data-i18n="footer_company_description">Ø§Ø­Ø¬Ø² Ø¬Ù„ÙŠØ³Ø§Øª Ø£Ø·ÙØ§Ù„ Ù…ÙˆØ«ÙˆÙ‚Ø© ÙˆÙ…ÙØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ«Ù‚Ø©.</p>
        </div>
        <div>
          <h3 data-i18n="footer_links_title">Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</h3>
          <ul>
            <li><a href="/index.html" data-i18n="nav_home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
            <li><a href="/about/index.html" data-i18n="nav_about">Ù…Ù† Ù†Ø­Ù†</a></li>
            <li><a href="/services/index.html" data-i18n="nav_services">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
            <li><a href="/con/index.html" data-i18n="nav_contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
          </ul>
        </div>
        <div>
          <h3 data-i18n="footer_contact_title">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
          <ul>
            <li data-i18n="footer_contact_email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: Safehands.com</li>
            <li data-i18n="footer_contact_phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: 01279581077</li>
            <li data-i18n="footer_contact_address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: 202 Ø´Ø§Ø±Ø¹ Ø¨Ø§ÙƒÙˆØ³ØŒ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©ØŒ Ù…ØµØ±</li>
          </ul>
        </div>
        <div class="Social-Media">
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="#"><i class="fab fa-whatsapp"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
      <div class="copyright">
        <span data-i18n="footer_copyright">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©. 2025 Safe Hands.</span>
      </div>
    </div>
  </footer>

  <script>
    const SUPABASE_URL = "https://ebzhfytrzcxsnepcudyl.supabase.co"; 
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViemhmeXRyemN4c25lcGN1ZHlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMDMyNjcsImV4cCI6MjA2MTc3OTI2N30.8sJgkbHRYMddNadF9aPgeLmNRuo7XOa3iyrXjHkumTc"; 
  const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  // ==================== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡ÙŠØ¯Ø± ====================
  function updateNavbar() {
    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
    const loginSignupLink = document.getElementById('login-signup-link');
    const logoutLink = document.getElementById('logout-link');
    const dashboardLink = document.getElementById('dashboard-link');
    const userNameDisplay = document.getElementById('user-name-display');
    const userNameText = document.getElementById('user-name-text');

    if (userData.email) {
      loginSignupLink.style.display = 'none';
      logoutLink.style.display = 'block';
      dashboardLink.style.display = 'block';
      userNameDisplay.style.display = 'inline-flex';
      userNameText.textContent = userData.name || 'Ù…Ø³ØªØ®Ø¯Ù…';
    } else {
      loginSignupLink.style.display = 'block';
      logoutLink.style.display = 'none';
      dashboardLink.style.display = 'none';
      userNameDisplay.style.display = 'none';
    }
  }

  function logout() {
    localStorage.removeItem('userData');
    updateNavbar();
    window.location.href = '/log/login.html';
  }

  // ==================== ØªØ­Ù…ÙŠÙ„ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ø¬Ù„ÙŠØ³Ø© ====================
  const params = new URLSearchParams(window.location.search);
  const babysitterId = params.get("id");

  async function loadProfile() {
    if (!babysitterId) {
      document.getElementById("profile").innerHTML = "<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙˆÙØ§ÙŠÙ„.</p>";
      return;
    }

    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„ÙŠØ³Ø©
    const { data: sitter, error } = await supabaseClient
      .from("babysitters")
      .select("*")
      .eq("id", babysitterId)
      .single();

    if (error || !sitter) {
      document.getElementById("profile").innerHTML = "<p>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>";
      console.error(error);
      return;
    }

    // Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
    const today = new Date().toISOString().split("T")[0];
    const { data: bookings } = await supabaseClient
      .from("bookings")
      .select("booking_date")
      .eq("babysitter_id", babysitterId);

    const busyToday = bookings?.some(b => new Date(b.booking_date).toISOString().split("T")[0] === today);
    const bookedDates = bookings?.map(b => new Date(b.booking_date).toISOString().split("T")[0]);

    const userLoggedIn = !!localStorage.getItem('userData');

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
    document.getElementById("profile").innerHTML = `
      <img src="${sitter.profile_image || 'https://via.placeholder.com/150'}" alt="${sitter.name}">
      <h2>${sitter.name}</h2>
      <p class="${busyToday ? 'busy-today' : 'available-today'}">
        ${busyToday ? 'ğŸ”´ Ù…Ø´ØºÙˆÙ„Ø© Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø©' : 'ğŸŸ¢ Ù…ØªØ§Ø­Ø© Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø©'}
      </p>
      <div class="profile-info">
        <p><i class="fas fa-graduation-cap"></i> Ø§Ù„Ø®Ø¨Ø±Ø©: ${sitter.experience || 0} Ø³Ù†ÙˆØ§Øª</p>
        <p><i class="fas fa-star"></i> Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${sitter.rating || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø¹Ø¯'}</p>
        <p><i class="fas fa-cogs"></i> Ø§Ù„Ø®Ø¯Ù…Ø§Øª: ${sitter.services || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
        <p><i class="fas fa-money-bill-wave"></i> Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø³Ø§Ø¹Ø©: ${sitter.hourly_rate || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} Ø¬.Ù…</p>
        <p><i class="fas fa-heart"></i> Ø§Ù„ØªØ®ØµØµØ§Øª: ${sitter.specialties || 'Ù„Ø§ ØªÙˆØ¬Ø¯'}</p>
      </div>
      <div class="booked-dates">
        <h4>Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©:</h4>
        <ul>
          ${bookedDates && bookedDates.length > 0 ? bookedDates.map(date => `<li>${date}</li>`).join('') : '<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª</li>'}
        </ul>
      </div>
      ${userLoggedIn 
        ? `<a href="/booking/book.html?babysitter_id=${sitter.id}" class="contact-btn"><i class="fas fa-calendar-plus"></i> Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</a>` 
        : '<p style="color:red; margin-top:15px;">Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø­Ø¬Ø² Ø§Ù„Ø¬Ù„ÙŠØ³Ø©</p>'}
    `;
  }

  // ==================== ØªÙ†ÙÙŠØ° Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ====================
  document.addEventListener('DOMContentLoaded', () => {
    updateNavbar();
    loadProfile();
  });
  </script>
</body>
</html>