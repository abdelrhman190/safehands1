<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlLang">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/img/images-removebg-preview.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <title data-i18n="site_title">Safe Hands - Babysitter Booking</title>
    
</head>
<body>
    <header>
        <nav>
    <div id="logo" class="logo">
        <img src="images-1-removebg-preview.png" alt="Safe Hands Icon">
        <span data-i18n="site_title">Safe Hands</span>
    </div>
    
    <div class="language-selector">
        <select id="languageSelect" onchange="changeLanguage()">
            <option value="ar">العربية</option>
            <option value="en">English</option>
        </select>
    </div>

    <div class="menu-toggle">
        <input type="checkbox" id="menu-toggle-input">
        <label for="menu-toggle-input" class="hamburger">☰</label>
        
        <ul>
            <li><a href="index.html" class="nav-link" data-i18n="nav_home">الرئيسية</a></li>
            <li><a href="/Services/index.html" class="nav-link" data-i18n="nav_services">الخدمات</a></li>
            <li><a href="/about/index.html" class="nav-link" data-i18n="nav_about">من نحن</a></li>
            <li><a href="/con/index.html" class="nav-link" data-i18n="nav_contact">تواصل معنا</a></li>
            <li><a href="/baby/index.html" class="nav-link" data-i18n="nav_find_babysitters">ابحث عن جليسات اطفال</a></li>
            
            <li id="login-item">
                <a href="/log/login.html" id="login-link" class="nav-link" data-i18n="nav_login_signup">تسجيل الدخول</a>
            </li>
<li id="user-name-display" style="display: none;">
    <a href="/my_pro/profile.html" class="user-profile-capsule">
        <div class="user-avatar-container">
            <img id="user-avatar-img" src="/img/default-avatar.png" alt="User">

        </div>
        <span id="user-name-text"></span>
    </a>
</li>
            <li id="logout-item" style="display: none;">
                <a href="#" id="logout-link" class="nav-link" onclick="logout(); return false;" data-i18n="nav_logout">تسجيل الخروج</a>
            </li>
        </ul>
    </div>
</nav>
    </header>
    <br><br><br>

    <section id="home" class="hero">
        <div class="hero-content">
            <h1 data-i18n="hero_title" class="typewriter">Your peace of mind starts here</h1>
            <p data-i18n="hero_description">We provide trained and trusted babysitters to keep your children in safe hands.</p>
            <a href="/baby/index.html"><button data-i18n="hero_button">البحث عن بيبي جليسات</button></a>
        </div>
    </section>

<section id="services" class="services">
    <h2 data-i18n="services_title">خدماتنا | Our Services</h2>
    <div class="service-cards">
        <div class="cards">
            <img src="/img/pretty-sister-spending-time-with-her-baby-brother-sitting-floor-bedroom-beautiful-young-babysitter-playing-with-little-boy-indoors-holding-stuffed-toy-duck-infancy-childcare-motherhood_344912-7-1.avif" alt="Babysitters">
            <h3 data-i18n="service1_title">بيبي سيترز موثوقون | Trusted Babysitters</h3>
            <p data-i18n="service1_description">
                جميع جليسات الأطفال مدربات وموثوقات، مع فحص خلفية شامل لضمان أمان طفلك وراحتك.<br>
                <span class="en">All babysitters are trained and background-checked to ensure your child’s safety and your peace of mind.</span>
            </p>
        </div>
        <div class="cards">
            <img src="/img/New_Times_New_Services_0562a0c516.jpg" alt="Flexible Scheduling">
            <h3 data-i18n="service2_title">مواعيد مرنة | Flexible Scheduling</h3>
            <p data-i18n="service2_description">
                نوفر خدمة الرعاية بالساعات أو الأيام أو بشكل مستمر لتناسب جدولك.<br>
                <span class="en">Schedule babysitting hourly, daily, or ongoing — fully tailored to your needs.</span>
            </p>
        </div>
        <div class="cards">
            <img src="/img/pexels-yankrukov-8612990.jpg" alt="Activities & Engagement">
            <h3 data-i18n="service3_title">أنشطة تعليمية وترفيهية | Fun & Learning</h3>
            <p data-i18n="service3_description">
                البيبي سيترز يهتمون بالرعاية واللعب والتعليم معًا ليكون طفلك سعيدًا ومشاركًا.<br>
                <span class="en">Our babysitters engage kids with fun, safe, and educational activities — not just care.</span>
            </p>
        </div>
    </div>
</section>

<section id="testimonials" class="testimonials">
  <h2>آراء العملاء</h2>
  <div class="testimonial-cards">
    <div class="card">
      <p>"خدمة رائعة! أول مرة أترك أطفالي مع جليسة وكنت مطمئنة جدًا."</p>
      <h4>- سارة محمد</h4>
    </div>
    <div class="card">
      <p>"الموقع وفر علي وقت كتير، لقيت جليسة ممتازة في دقائق."</p>
      <h4>- أحمد علي</h4>
    </div>
    <div class="card">
      <p>"جليسة الأطفال كانت لطيفة جدًا ومهتمة بتفاصيل ابني."</p>
      <h4>- منى حسن</h4>
    </div>
  </div>
</section>

<section id="team" class="team-section">
    <h2 data-i18n="team_title">فريق مقدمي الرعاية</h2>
    <div id="babysitter-list" class="babysitter-container">
        <div class="babysitter-grid"></div>
    </div>
</section>

<section id="how-it-works" class="how-it-works">
  <h2>خطوات الحجز</h2>
  <div class="steps">
    <div class="step">
      <i class="fa fa-search"></i>
      <h3>ابحث</h3>
      <p>ابحث عن جليسة أطفال مناسبة في منطقتك.</p>
    </div>
    <div class="step">
      <i class="fa fa-user-check"></i>
      <h3>اختر</h3>
      <p>راجع الملفات الشخصية والتقييمات.</p>
    </div>
    <div class="step">
      <i class="fa fa-calendar-check"></i>
      <h3>احجز</h3>
      <p>حدد الموعد المناسب لك بسهولة.</p>
    </div>
    <div class="step">
      <i class="fa fa-smile"></i>
      <h3>استمتع براحة بالك</h3>
      <p>جليسة أطفال موثوقة في خدمتك.</p>
    </div>
  </div>
</section>

<section id="safety" class="safety">
  <h2>الأمان والموثوقية</h2>
  <div class="safety-points">
    <div class="point">
      <i class="fa fa-id-card"></i>
      <h3>فحص الخلفية</h3>
      <p>جميع الجليسات يخضعن لفحص شامل للهوية والسجل.</p>
    </div>
    <div class="point">
      <i class="fa fa-graduation-cap"></i>
      <h3>تدريب متخصص</h3>
      <p>برامج تدريب على الإسعافات الأولية والتعامل مع الأطفال.</p>
    </div>
    <div class="point">
      <i class="fa fa-star"></i>
      <h3>تقييمات حقيقية</h3>
      <p>أولياء الأمور يقيّمون الجليسات بعد كل جلسة.</p>
    </div>
  </div>
</section>

    <a href="#home" class="scroll-up"><i class="fa-solid fa-arrow-up"></i></a>
    <a href="faq/index.html" class="faq" data-i18n="faq_link">FAQ</a>

    <footer class="footer">
        <div class="container">
            <div class="grid">
                <div>
                    <h3 data-i18n="footer_company_title">Safe Hands</h3>
                    <p data-i18n="footer_company_description">
                        احجز جليسات أطفال موثوقة ومُتحقق منها بسهولة وثقة.
                    </p>
                </div>
                <div>
                    <h3 data-i18n="footer_links_title">الروابط</h3>
                    <ul>
                        <li><a href="index.html" data-i18n="nav_home">الرئيسية</a></li>
                        <li><a href="/about/index.html" data-i18n="nav_about">من نحن</a></li>
                        <li><a href="/Services/index.html" data-i18n="nav_services">الخدمات</a></li>
                        <li><a href="/con/index.html" data-i18n="nav_contact">تواصل معنا</a></li>
                    </ul>
                </div>
                <div>
                    <h3 data-i18n="footer_contact_title">تواصل معنا</h3>
                    <ul>
                        <li data-i18n="footer_contact_email">البريد الإلكتروني: Safehands.com</li>
                        <li data-i18n="footer_contact_phone">رقم الهاتف: 01279581077</li>
                        <li data-i18n="footer_contact_address">العنوان: 202 شارع باكوس، الإسكندرية، مصر</li>
                    </ul>
                </div>
                <div class="Social-Media">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="copyright">
                <span data-i18n="footer_copyright">جميع الحقوق محفوظة. 2025 Safe Hands.</span>
            </div>
        </div>
    </footer>

    <script>
        const supabaseClient = window.supabase.createClient(
            'https://ebzhfytrzcxsnepcudyl.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViemhmeXRyemN4c25lcGN1ZHlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMDMyNjcsImV4cCI6MjA2MTc3OTI2N30.8sJgkbHRYMddNadF9aPgeLmNRuo7XOa3iyrXjHkumTc'
        );

        const translations = {
            ar: {
                site_title: "الأيدي الآمنة",
                nav_home: "الرئيسية",
                nav_services: "الخدمات",
                nav_about: "من نحن",
                nav_contact: "تواصل معنا",
                nav_find_babysitters: "ابحث عن جليسة أطفال",
                nav_logout: "تسجيل الخروج",
                nav_login_signup: "تسجيل الدخول / إنشاء حساب",
                hero_title: "راحة بالك تبدأ من هنا",
                hero_description: "نوفر لك جليسات أطفال مؤهلات وموثوقات ليكون أطفالك في أيدٍ آمنة.",
                hero_button: "ابحث عن جليسات الأطفال",
                services_title: "خدماتنا",
                team_title: "فريق مقدمي الرعاية",
                experience_label: "الخبرة",
                price_label: "جنية/ساعة",
                view_profile: "عرض الملف والحجز",
                faq_link: "الأسئلة الشائعة",
                footer_company_title: "الأيدي الآمنة",
                footer_company_description: "منصتك لحجز جليسات أطفال معتمدات بسهولة وثقة.",
                footer_links_title: "الروابط",
                footer_contact_title: "تواصل معنا",
                footer_contact_email: "البريد الإلكتروني: Safehands.com",
                footer_contact_phone: "الهاتف: 01279581077",
                footer_contact_address: "العنوان: 202 شارع باكوس، الإسكندرية، مصر",
                footer_copyright: "© 2025 الأيدي الآمنة. جميع الحقوق محفوظة."
            },
            en: {
                site_title: "Safe Hands",
                nav_home: "Home",
                nav_services: "Services",
                nav_about: "About",
                nav_contact: "Contact",
                nav_find_babysitters: "Find a Babysitter",
                nav_logout: "Logout",
                nav_login_signup: "Login / Sign Up",
                hero_title: "Your peace of mind starts here",
                hero_description: "Trusted, qualified babysitters to keep your children safe and happy.",
                hero_button: "Find Babysitters",
                services_title: "Our Services",
                team_title: "Care Provider Team",
                experience_label: "Experience",
                price_label: "EGP/hr",
                view_profile: "View Profile & Book",
                faq_link: "FAQ",
                footer_company_title: "Safe Hands",
                footer_company_description: "Book reliable, verified babysitters with ease and confidence.",
                footer_links_title: "Links",
                footer_contact_title: "Contact Us",
                footer_contact_email: "Email: Safehands.com",
                footer_contact_phone: "Phone: 01279581077",
                footer_contact_address: "202 Bakos Street, Alexandria, Egypt",
                footer_copyright: "© 2025 Safe Hands. All rights reserved."
            }
        };


   // دالة موحدة لجلب وعرض البيانات مع التكرار والأنيميشن
        async function fetchAndDisplay() {
            try {
                const { data, error } = await supabaseClient.from('babysitters').select('*');
                if (error) throw error;

                const container = document.getElementById('babysitter-list');
                if (!data || !container) return;

                const lang = localStorage.getItem('language') || 'ar';

                // دالة إنشاء كود الـ HTML لكل كارت
                const createCardHTML = (sitter) => {
                    const rating = sitter.rating || 0;
                    const fullStars = '<i class="fas fa-star" style="color:#ffc107"></i>'.repeat(Math.round(rating));
                    const emptyStars = '<i class="far fa-star" style="color:#ffc107"></i>'.repeat(5 - Math.round(rating));
                    
                    return `
                        <div class="babysitter-card-new">
                            <div class="sitter-image-container"><img src="${sitter.profile_image}" onerror="this.src='https://via.placeholder.com/150'"></div>
                            <div class="sitter-info">
                                <h3>${sitter.name}</h3>
                                <div class="rating-stars">${fullStars}${emptyStars} <span>(${rating})</span></div>
                                <p class="experience-text"><i class="fas fa-briefcase"></i> ${translations[lang].experience_label || 'الخبرة'}: ${sitter.experience} سنوات</p>
                                <p class="price-text"><i class="fas fa-tag"></i> ${sitter.hourly_rate || 0} ${translations[lang].price_label || 'جنية/ساعة'}</p>
                                <a href="/baby/babysitter.html?id=${sitter.id}" class="book-btn-small">${translations[lang].view_profile || 'عرض الملف'}</a>
                            </div>
                        </div>`;
                };

                const allCardsHTML = data.map(sitter => createCardHTML(sitter)).join('');
                
                // التكرار 5 مرات لضمان عدم وجود فراغات في الأنيميشن
                container.innerHTML = allCardsHTML.repeat(5);

            } catch (err) {
                console.error("Error:", err);
            }
        }

        function changeLanguage() {
            const lang = document.getElementById('languageSelect').value;
            document.getElementById('htmlLang').setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
            localStorage.setItem('language', lang);
            fetchAndDisplay(); // إعادة تحميل الكروت باللغة الجديدة
        }

        function updateNavigation() {
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            const userEmail = userData.contact_info || userData.email;
            document.getElementById('login-link').style.display = userEmail ? 'none' : 'block';
            document.getElementById('logout-link').style.display = userEmail ? 'block' : 'none';
            if (userEmail) document.getElementById('user-name-text').textContent = userData.name || "مستخدم";
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('language') || 'ar';
            document.getElementById('languageSelect').value = savedLang;
            updateNavigation();
            fetchAndDisplay();
        });
    document.addEventListener('DOMContentLoaded', fetchAndDisplay);
        // تشغيل الوظائف عند التحميل
        document.addEventListener('DOMContentLoaded', async () => {
            const data = await fetchBabysitters();
            displayBabysitters(data);
        });
        function changeLanguage() {
            const lang = document.getElementById('languageSelect').value;
            document.getElementById('htmlLang').setAttribute('lang', lang);
            document.getElementById('htmlLang').setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) el.textContent = translations[lang][key];
            });
            localStorage.setItem('language', lang);
            updateNavigation();
            fetchBabysitters().then(displayBabysitters);
        }

       // دالة تحديث شريط التنقل (Navigation)
function updateNavigation() {
    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
    // جلب البيانات سواء كانت مخزنة كـ email أو contact_info
    const userEmail = userData.email || userData.contact_info;

    const loginItem = document.getElementById('login-item');
    const userDisplay = document.getElementById('user-name-display');
    const logoutItem = document.getElementById('logout-item');
    const userNameText = document.getElementById('user-name-text');
    const userImg = document.getElementById('user-avatar-img');

    if (userEmail) {
        // حالة: المستخدم مسجل دخول
        if (loginItem) loginItem.style.display = 'none';
        
        // إظهار الكبسولة وزر الخروج (استخدام flex لضمان التنسيق)
        if (userDisplay) userDisplay.style.display = 'flex';
        if (logoutItem) logoutItem.style.display = 'flex';

        // تحديث الاسم والصورة
        if (userNameText) userNameText.textContent = userData.name || "مستخدم";
        if (userImg && userData.profile_pic) {
            userImg.src = userData.profile_pic;
        }
    } else {
        // حالة: لا يوجد مستخدم
        if (loginItem) loginItem.style.display = 'block';
        if (userDisplay) userDisplay.style.display = 'none';
        if (logoutItem) logoutItem.style.display = 'none';
    }
}
document.addEventListener('DOMContentLoaded', () => {
    const user = JSON.parse(localStorage.getItem('userData'));
    const avatarImg = document.getElementById('user-avatar-img');

    if (!avatarImg) return;

    if (user && user.image_url) {
        avatarImg.src = user.image_url;
    } else {
        avatarImg.src = "/img/default-avatar.png";
    }
});
avatarImg.onerror = () => {
    avatarImg.src = "/img/default-avatar.png";
};

// دالة تسجيل الخروج
function logout() {
    localStorage.removeItem('userData');
    updateNavigation();
    window.location.href = '/log/login.html';
}

// عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', () => {
    updateNavigation();
    fetchAndDisplay(); // دالة جلب الجليسات التي لديك بالفعل
});
if (userEmail) {
    // إخفاء تسجيل الدخول
    document.getElementById('login-item').style.display = 'none';
    
    // إظهار البروفايل وتسجيل الخروج
    document.getElementById('user-name-display').style.display = 'flex';
    document.getElementById('logout-item').style.display = 'flex'; 
    
    document.getElementById('user-name-text').textContent = userData.name;
}
        document.addEventListener('DOMContentLoaded', async () => {
            const savedLang = localStorage.getItem('language') || 'ar';
            document.getElementById('languageSelect').value = savedLang;
            changeLanguage();
            const sitters = await fetchBabysitters();
            displayBabysitters(sitters);
        });
    </script>
</body>
</html>